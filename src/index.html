<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <link rel="stylesheet" href="css/style.css">
        <title>Striking Matchbox Archive</title>
    </head>
    <body ng-controller="searchctrl">
        <div id="drawer">
            <a class="close" ng-click="closeDrawer()">&times;</a>
            <div ng-view>
            </div>
        </div>
        <div id="sidebar">
            <label ng-show="isLoggedIn()">
                <input type="checkbox" ng-model="queryData.showHidden">Show hidden
            </label>
            <label ng-repeat="metafield in metafields">
                <input ng-if="metafield.type == 'text'" type="text" ng-model="queryData[metafield.name]" placeholder="{{ metafield.placeholder }}">
                <input ng-if="metafield.type == 'number'" type="number" ng-model="queryData['min_'+metafield.name]" placeholder="{{ metafield.placeholder }} minimum">
                <input ng-if="metafield.type == 'number'" type="number" ng-model="queryData['max_'+metafield.name]" placeholder="{{ metafield.placeholder }} maximum">
            </label>
            <button ng-click="newSearch()">Search</button>
        </div>
        <div id="result">
            <img class="thumb" ng-repeat="result in results" ng-src="/bucket/{{result.mainImage}}.thumb.png" ng-click="showDetails(result.id)" ng-class="{transparent : !result.visible}">
            <img class="thumb load-trigger" src="http://placehold.it/250x250&text=Loading..." ng-show="hasMore">
            <img class="thumb" src="http://placehold.it/250x250&text=New" ng-show="isLoggedIn()" ng-click="newMatchbox()">
        </div>

        <script src="/js/main.js"></script>
        <script>angular.bootstrap(document, ['matchboxarchive']);</script>
    </body>
</html>
